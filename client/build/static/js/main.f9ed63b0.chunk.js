(this["webpackJsonpnews-scraper-v2"]=this["webpackJsonpnews-scraper-v2"]||[]).push([[0],{56:function(e,t,a){},82:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),r=a(24),i=a.n(r),l=(a(56),a(6)),o=a(4),u=a(10),d=a.n(u),j=a(19),h=a(20),b=a(5),m=a(15),O=a(7),p=a(99),x="SET_ALERT",f="REMOVE_ALERT",v="REGISTER_SUCCESS",g="REGISTER_FAIL",N="USER_LOADED",S="AUTH_ERROR",w="LOGIN_SUCCESS",y="LOGIN_FAIL",k="LOGOUT",A=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(c){var n=Object(p.a)();c({type:x,payload:{msg:e,alertType:t,id:n}}),setTimeout((function(){return c({type:f,payload:n})}),a)}},R=a(11),C=a.n(R),E=function(e){e?C.a.defaults.headers.common["x-auth-token"]=e:delete C.a.defaults.headers.common["x-auth-token"]},T=function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&E(localStorage.token),e.prev=1,e.next=4,C.a.get("/api/auth");case 4:a=e.sent,t({type:N,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:S});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},F=a(16),L=a(17),_=Object(O.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return Object(c.jsx)("article",{className:"m-3 message is-".concat(e.alertType),children:Object(c.jsx)("div",{className:"message-body",children:e.msg})},e.id)}))})),D=(a(82),Object(O.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:A,register:function(e){var t=e.name,a=e.email,c=e.password;return function(){var e=Object(j.a)(d.a.mark((function e(n){var s,r,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"Content-Type":"application/json"}},r=JSON.stringify({name:t,email:a,password:c}),e.prev=2,e.next=5,C.a.post("/api/users",r,s);case 5:i=e.sent,n({type:v,payload:i.data}),n(T()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),(l=e.t0.response.data.errors)&&l.forEach((function(e){return n(A(e.msg,"danger"))})),n({type:g});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.register,s=e.isAuthenticated,r=Object(n.useState)({name:"",email:"",password:"",password2:""}),i=Object(m.a)(r,2),u=i[0],O=i[1],p=u.name,x=u.email,f=u.password,v=u.password2,g=function(e){return O(Object(b.a)(Object(b.a)({},u),{},Object(h.a)({},e.target.name,e.target.value)))},N=function(){var e=Object(j.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.preventDefault(),f!==v?t("Paswords do not match","danger"):a({name:p,email:x,password:f});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s?Object(c.jsx)(o.a,{to:"/home"}):Object(c.jsxs)("div",{className:"Register has-background-link",children:[Object(c.jsx)("div",{className:"column is-full",children:Object(c.jsxs)("h1",{className:"title is-1 mt-5 has-text-white",children:[Object(c.jsx)(F.a,{className:"has-text-info",icon:L.a}),"AZ Central Scraper"]})}),Object(c.jsxs)("div",{className:"column box-shadow window has-background-white is-half-tablet",children:[Object(c.jsxs)("form",{onSubmit:function(e){return N(e)},children:[Object(c.jsx)(_,{}),Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",htmlFor:"name",children:"Name: "}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{className:"input",type:"text",placeholder:"John Doe",name:"name",value:p,onChange:function(e){return g(e)}})})]}),Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",htmlFor:"email",children:"Email: "}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{className:"input",type:"text",placeholder:"JohnDoe@gmail.com",name:"email",value:x,onChange:function(e){return g(e)}})})]}),Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",htmlFor:"password",children:"Password: "}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{className:"input",type:"password",placeholder:"*********",name:"password",value:f,onChange:function(e){return g(e)}})})]}),Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",htmlFor:"password2",children:"Confirm Password: "}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{className:"input",type:"password",placeholder:"*********",name:"password2",value:v,onChange:function(e){return g(e)}})})]}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{className:"button is-link",type:"submit",value:"Register",children:"Submit"})})})]}),Object(c.jsxs)("p",{children:["Already have an account? ",Object(c.jsx)(l.b,{to:"/",children:"Log in"})]}),Object(c.jsxs)("p",{children:["Or ",Object(c.jsx)(l.b,{to:"/home",children:"continue as guest"})]})]})]})}))),P=(a(86),Object(O.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:A,login:function(e,t){return function(){var a=Object(j.a)(d.a.mark((function a(c){var n,s,r,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={headers:{"Content-Type":"application/json"}},s=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,C.a.post("/api/auth",s,n);case 5:r=a.sent,c({type:w,payload:r.data}),c(T()),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),(i=a.t0.response.data.errors)&&i.forEach((function(e){return c(A(e.msg,"danger"))})),c({type:y});case 15:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,s=Object(n.useState)({email:"",password:""}),r=Object(m.a)(s,2),i=r[0],u=r[1],O=i.email,p=i.password,x=function(e){return u(Object(b.a)(Object(b.a)({},i),{},Object(h.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(j.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(O,p);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?Object(c.jsx)(o.a,{to:"/home"}):Object(c.jsxs)("div",{className:"Login has-background-link",children:[Object(c.jsx)("div",{className:"column is-full",children:Object(c.jsxs)("h1",{className:"title is-1 mt-5 has-text-white",children:[Object(c.jsx)(F.a,{className:"has-text-info",icon:L.a}),"AZ Central Scraper"]})}),Object(c.jsxs)("div",{className:"column box-shadow window has-background-white is-half-tablet",children:[Object(c.jsxs)("form",{onSubmit:function(e){return f(e)},children:[Object(c.jsx)(_,{}),Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",htmlFor:"email",children:"Email: "}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{className:"input",type:"text",placeholder:"JohnDoe@gmail.com",name:"email",value:O,onChange:function(e){return x(e)},required:!0})})]}),Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",htmlFor:"password",children:"Password: "}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{className:"input",type:"password",placeholder:"*********",name:"password",value:p,onChange:function(e){return x(e)},minLength:"6",required:!0})})]}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{className:"button is-link",type:"submit",value:"Login",children:"Submit"})})})]}),Object(c.jsxs)("p",{children:["Don't have an account? ",Object(c.jsx)(l.b,{to:"/register",children:"Sign Up"})]}),Object(c.jsxs)("p",{children:["Or ",Object(c.jsx)(l.b,{to:"/home",children:"continue as guest"})]})]})]})}))),I=a(43),J=a(44),U=a(50),G=a(47),H=(a(87),Object(O.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:k})}}})((function(e){var t=e.auth,a=t.isAuthenticated,s=t.loading,r=e.logout,i=Object(n.useState)(!1),o=Object(m.a)(i,2),u=o[0],d=o[1],j=Object(c.jsxs)(n.Fragment,{children:[Object(c.jsxs)("div",{className:"navbar-start",children:[Object(c.jsx)(l.b,{className:"navbar-item",to:"/home",children:"Home"}),Object(c.jsx)(l.b,{className:"navbar-item",to:"/saved",children:"Saved Articles"})]}),Object(c.jsx)("div",{className:"navbar-end",children:Object(c.jsxs)(l.b,{className:"navbar-item",onClick:r,to:"/",children:[Object(c.jsx)(F.a,{className:"has-text-info",icon:L.c}),"Logout"]})})]}),h=Object(c.jsxs)(n.Fragment,{children:[Object(c.jsx)("div",{className:"navbar-start",children:Object(c.jsx)(l.b,{className:"navbar-item",to:"/home",children:"Home"})}),Object(c.jsxs)("div",{className:"navbar-end",children:[Object(c.jsxs)(l.b,{className:"navbar-item",to:"/register",children:[Object(c.jsx)(F.a,{className:"has-text-info",icon:L.d}),"Sign Up"]}),Object(c.jsxs)(l.b,{className:"navbar-item",to:"/",children:[Object(c.jsx)(F.a,{className:"has-text-info",icon:L.b}),"Login"]})]})]});return Object(c.jsxs)("nav",{className:"navbar px-5 is-info",children:[Object(c.jsxs)("div",{className:"navbar-brand",children:[Object(c.jsxs)(l.b,{className:"navbar-item",to:"/home",children:[Object(c.jsx)(F.a,{className:"has-text-info",icon:L.a,size:"lg"}),Object(c.jsx)("span",{className:"navbar-title",children:"AZ Central Scraper"})]}),Object(c.jsxs)("a",{role:"button",className:"navbar-burger ".concat(u?"is-active":""),"aria-label":"menu","aria-expanded":"false",onClick:function(){d(!u)},children:[Object(c.jsx)("span",{"aria-hidden":"true"}),Object(c.jsx)("span",{"aria-hidden":"true"}),Object(c.jsx)("span",{"aria-hidden":"true"})]})]}),Object(c.jsx)("div",{className:"navbar-menu ".concat(u?"is-active":""),children:!s&&Object(c.jsx)(n.Fragment,{children:a?j:h})})]})}))),M=(a(88),function(e){var t=e.children;return Object(c.jsx)("div",{className:"Container",children:t})}),z=(a(89),a(90),function(e){var t="Field";return e.classProp&&(t+=" ".concat(e.classProp)),Object(c.jsx)("div",{className:t,children:e.children})}),Y=(a(91),function(e){var t=e.selected.src===e.src?"selected":null;return Object(c.jsxs)("div",{className:"Result ".concat(t),"data-src":e.src,onClick:e.handleSelected,children:[Object(c.jsxs)("p",{className:"time has-text-link",children:[e.topic," - ",e.date]}),Object(c.jsx)("p",{className:"title is-5",children:e.title})]})}),Z=(a(92),function(e){return Object(c.jsxs)(z,{classProp:"ResultsList",children:[Object(c.jsxs)("div",{className:"filter-var",children:[Object(c.jsx)("strong",{children:"Topic:"})," ",e.topic]}),Object(c.jsx)("div",{className:"article-list",children:Array.isArray(e.results)?e.results.map((function(t,a){if(t.time)return Object(c.jsx)(Y,{id:t.id,title:t.headline,topic:t.topic,date:t.time,src:t.src,handleSelected:e.handleSelected,selected:e.selected},a)})):null})]})}),q=function(e){return C.a.get("/api/azc")},B=function(e){return C.a.post("/api/azc/selected",{selectedResult:e})},V=function(e){C.a.post("/api/article",e)},W=function(e){C.a.delete("/api/article/".concat(e))},K=function(e){return C.a.get("/api/article/user/".concat(e))},Q=(a(93),Object(O.b)((function(e){return{auth:e.auth}}))((function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),s=a[0],r=a[1];Object(n.useEffect)((function(){e.auth.user&&"/home"===i&&K(e.auth.user._id).then((function(t){console.log(e.selected),r(void 0!==t.data.find((function(t){return t.src===e.selected.src})))}))}),[e.auth.user,e.selected]);var i=Object(o.g)().pathname,u=e.selected,d=function(){V(Object(b.a)(Object(b.a)({},u),{},{user:e.auth.user})),r(!0)};return u&&u.text?u.text&&0===u.text.length?Object(c.jsx)(z,{classProp:"SelectedResult",children:Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("h4",{className:"title is-4",children:"Article cannot be scraped"}),Object(c.jsxs)("div",{className:"links mt-4",children:[Object(c.jsx)("p",{children:"Visit the article here: "}),Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:u.src,children:u.src})]})]})}):Object(c.jsxs)(z,{classProp:"SelectedResult has-text-left",children:[Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("p",{className:"title",children:u.headlineSummary}),Object(c.jsxs)("p",{className:"time has-text-right has-text-link",children:[Object(c.jsx)("b",{children:u.topic})," | ",u.timeSummary]}),Object(c.jsxs)("p",{className:"has-text-right has-text-info",children:[Object(c.jsx)("b",{children:u.author})," ",u.company]}),function(){var t=e.auth.isAuthenticated;return"/home"===i?!t||s?null:Object(c.jsx)("div",{className:"mt-2 w-100 has-text-right",children:Object(c.jsx)("button",{onClick:d,className:"button is-success is-outlined",children:"Save Article"})}):Object(c.jsx)("div",{className:"mt-2 w-100 has-text-right",children:Object(c.jsx)("button",{onClick:e.deleteArticle,className:"button is-danger is-outlined",children:"Delete"})})}()]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"article",children:u.text.map((function(e,t){return Object(c.jsx)("p",{className:"content-p",children:e},t)}))}),Object(c.jsx)("div",{className:"links",children:Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:u.src,children:u.src})})]}):Object(c.jsxs)(z,{classProp:"SelectedResult",children:[Object(c.jsx)("div",{className:"header",children:Object(c.jsx)("p",{className:"title",children:"Save articles on the home page to view saved articles"})}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"article has-text-left",children:[Object(c.jsx)("p",{className:"content-p",children:"Go to the home page, select an article that you are interested in or would like to save and click the save article button!"}),Object(c.jsx)("p",{className:"content-p",children:"Your saved articles will appear here for you to view whenever you'd like."}),Object(c.jsxs)("p",{className:"content-p",children:["Click here to go to the ",Object(c.jsx)(l.b,{to:"/Home",children:"Home Page"})]})]})]})}))),X=function(e){return Object(c.jsxs)("div",{className:"ResultsContainer box-shadow",children:[Object(c.jsx)(Z,{results:e.results,topic:e.topic,timeRange:e.timeRange,handleSelected:e.handleSelected,selected:e.selected}),Object(c.jsx)(Q,{selected:e.selected,deleteArticle:e.deleteArticle})]})},$=(a(94),function(e){Object(U.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(I.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchResults:[],selectedResult:{},filters:{searchTopic:"Recent",startYear:"1900",endYear:"1920"}},e.getArticles=function(){q().then((function(t){e.setState({searchResults:t.data},(function(){B(t.data[0]).then((function(t){e.setState((function(){return{selectedResult:t.data}}))})).catch((function(e){return console.log(e)}))}))})).catch((function(e){return console.log(e)}))},e.handleFormSubmit=function(t){t.preventDefault(),e.getArticles()},e.handleSelected=function(t){var a=t.target.closest(".Result").dataset.src,c=e.state.searchResults.find((function(e){return e.src==a}));B(c).then((function(t){e.setState((function(){return{selectedResult:t.data}}))})).catch((function(e){return console.log(e)}))},e}return Object(J.a)(a,[{key:"componentDidMount",value:function(){this.getArticles()}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"Home",children:[Object(c.jsx)(H,{}),Object(c.jsx)(M,{className:"Container",children:Object(c.jsx)(X,{results:this.state.searchResults,selected:this.state.selectedResult,topic:this.state.filters.searchTopic,timeRange:this.state.filters.timeRange,handleSelected:this.handleSelected})})]})}}]),a}(n.Component)),ee=(a(95),Object(O.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,a=Object(n.useState)([]),s=Object(m.a)(a,2),r=s[0],i=s[1],l=Object(n.useState)({}),o=Object(m.a)(l,2),u=o[0],d=o[1];Object(n.useEffect)((function(){t.user&&K(t.user._id).then((function(e){i(e.data),d(e.data[0])}))}),[t.user]);return Object(c.jsxs)("div",{className:"Saved",children:[Object(c.jsx)(H,{}),Object(c.jsx)(M,{className:"Container",children:Object(c.jsx)(X,{results:r,selected:u,handleSelected:function(e){var t=e.target.closest(".Result").dataset.src;d(r.find((function(e){return e.src==t})))},deleteArticle:function(){var e=r.filter((function(e){return e._id!=u._id}));i(e),d(e[0]),W(u._id)},topic:"Saved Articles"})})]})}))),te=a(49),ae=Object(O.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=a.isAuthenticated,s=a.loading,r=Object(te.a)(e,["component","auth"]);return Object(c.jsx)(o.b,Object(b.a)(Object(b.a)({},r),{},{render:function(e){return n||s?Object(c.jsx)(t,Object(b.a)({},e)):Object(c.jsx)(o.a,{to:"/"})}}))})),ce=a(18),ne=a(45),se=a(46),re=a(48),ie=[],le={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},oe=Object(ce.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;switch(a){case x:return[].concat(Object(re.a)(e),[c]);case f:return e.filter((function(e){return e.id!==c}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;switch(a){case N:return Object(b.a)(Object(b.a)({},e),{},{isAuthenticated:!0,loading:!1,user:c});case v:case w:return localStorage.setItem("token",c.token),Object(b.a)(Object(b.a)(Object(b.a)({},e),c),{},{isAuthenticated:!0,loading:!1});case g:case S:case y:case k:return localStorage.removeItem("token"),Object(b.a)(Object(b.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});default:return e}}}),ue=[se.a],de=Object(ce.createStore)(oe,{},Object(ne.composeWithDevTools)(ce.applyMiddleware.apply(void 0,ue)));a(96);localStorage.token&&E(localStorage.token);var je=function(){return Object(n.useEffect)((function(){de.dispatch(T())}),[]),Object(c.jsx)(O.a,{store:de,children:Object(c.jsx)(l.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{exact:!0,path:"/",component:P}),Object(c.jsx)(o.b,{exact:!0,path:"/home",component:$}),Object(c.jsx)(o.b,{exact:!0,path:"/register",component:D}),Object(c.jsx)(ae,{exact:!0,path:"/saved",component:ee})]})})})})},he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,100)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(je,{})}),document.getElementById("root")),he()}},[[97,1,2]]]);
//# sourceMappingURL=main.f9ed63b0.chunk.js.map